<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Doctor Home - Nexus Pulse</title>
    <link rel="stylesheet" th:href="@{/css/app.css}">
</head>

<body>
<div class="layout">

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo">Nexus Pulse</div>
            <div class="subtitle">Doctor Portal</div>
        </div>

        <nav class="sidebar-nav">
            <a class="active" th:href="@{/doctor/home}">
				<!-- home SVG -->
				    <svg class="menu-svg" width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
				      <path d="M3 11.5L12 4l9 7.5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
				      <path d="M9 21V13h6v8" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
				    </svg>
                <span class="label">Home</span>
            </a>
          
            <a th:href="@{/doctor/logout}">
				<!-- logout SVG -->
					    <svg class="menu-svg" width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
					      <path d="M9 21H6a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
					      <path d="M16 17l5-5-5-5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
					      <path d="M21 12H9" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
					    </svg>
                <span class="label">Logout</span>
            </a>
        </nav>
    </aside>

    <!-- MAIN -->
    <main class="layout-main">

        <!-- HEADER -->
        <div class="card header-card">
            <div class="title-block">
                <h2>Doctor Dashboard</h2>
                <p class="subtext">
                    Welcome, <strong th:text="${doctor.name}"></strong>
                </p>
            </div>
            <div class="pill">
                <span class="dot"></span>
                <span>Viewing the Appointment Details</span>
            </div>
        </div>

        <!-- âœ… APPOINTMENTS CARD -->
        <div class="card">
            <h3>Your Appointments</h3>

            <!-- EMPTY STATE -->
            <div th:if="${appointments.isEmpty()}" class="subtext">
                No appointments assigned.
            </div>

            <!-- TABLE -->
            <table th:if="${!appointments.isEmpty()}">
                <thead>
                <tr>
                    <th>Date & Time</th>
                    <th>Patient</th>
                    <th>Reason</th>
                    <th>Status</th>
					<th>Patient History</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="a : ${appointments}">
                    <td th:text="${#temporals.format(a.appointmentDateTime, 'yyyy-MM-dd HH:mm')}"></td>
                    <td th:text="${a.patient.firstName + ' ' + a.patient.lastName}"></td>
                    <td th:text="${a.reason}"></td>
                    <td>
                        <span th:text="${a.status}"
                              th:class="'status-pill ' + ${a.status.toLowerCase()}">
                        </span>
                    </td>
					<td>
					  <a th:href="@{/doctor/appointment/{id}/history(id=${a.id})}"
					     class="btn-link">
					     View History
					  </a>
					</td>
                </tr>
                </tbody>
            </table>
        </div>

    </main>
</div>
</body>
</html>
