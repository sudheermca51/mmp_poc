<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Admin - Patients</title>
    <link rel="stylesheet" th:href="@{/css/app.css}">
	<link rel="stylesheet" th:href="@{/css/admin.css}">
 
</head>

<body>
<div class="layout">
    <aside class="sidebar admin-sidebar">
        <div class="sidebar-header">
            <div class="logo">MMP</div>
            <div class="subtitle">Admin Portal</div>
        </div>
        <nav class="sidebar-nav">
            <a th:href="@{/admin/home}">HOME</a>
            <a class="active" th:href="@{/admin/patients}">Patients</a>
            <a th:href="@{/admin/claim-center}">Claim Center</a>
            <a th:href="@{/admin/reports}">Reports</a>
            <a th:href="@{/admin/messages}">Messages</a>
            <a th:href="@{/admin/logout}">Logout</a>
        </nav>
    </aside>

    <main class="layout-main">
        <div class="card header-card">
            <h2>Patients</h2>
            <p>Approve or reject patients. Only approved patients can login.</p>
        </div>

        <!-- FILTER CHIPS -->
        <div class="filter-chips">
            <a th:href="@{/admin/patients}" class="chip">All</a>
            <a th:href="@{/admin/patients(status='approved')}" class="chip approved">Approved</a>
            <a th:href="@{/admin/patients(status='rejected')}" class="chip rejected">Rejected</a>
        </div>

        <!-- EMPTY STATE -->
        <div th:if="${patients.isEmpty()}" class="empty-state">
            <h3>No patients found</h3>
            <p>Try adjusting your filters.</p>
        </div>

        <!-- TABLE -->
        <div th:if="${!patients.isEmpty()}" class="card patients-card">
            <table class="patients-table">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Username <span class="sort-arrows">▲▼</span></th>
                    <th>Full Name <span class="sort-arrows">▲▼</span></th>
                    <th>Email</th>
                    <th>Status</th>
                    <th class="actions-col">Actions</th>
                </tr>
                </thead>

                <tbody>
                <tr th:each="p : ${patients}">
                    <td th:text="${p.id}"></td>
                    <td th:text="${p.username}"></td>
                    <td th:text="${p.firstName} + ' ' + ${p.lastName}"></td>
                    <td th:text="${p.email}"></td>

                    <td>
                        <span th:if="${p.approved}" class="status-pill approved">Approved</span>
                        <span th:if="${p.rejected}" class="status-pill rejected">Rejected</span>
                    </td>

                    <td class="actions-col">
                        <form th:action="@{/admin/patients/{id}/approve(id=${p.id})}" method="post">
                            <button class="btn-secondary" th:disabled="${p.approved}">Approve</button>
                        </form>
                        <form th:action="@{/admin/patients/{id}/reject(id=${p.id})}" method="post">
                            <button class="btn-danger" th:disabled="${p.rejected}">Reject</button>
                        </form>
                    </td>
                </tr>
                </tbody>
            </table>

            <!-- PAGINATION -->
            <div class="pagination-footer">
                <span>Showing results</span>
                <div class="pagination-controls">
                    <button disabled>Prev</button>
                    <button class="active">1</button>
                    <button>2</button>
                    <button>Next</button>
                </div>
            </div>
        </div>
    </main>
</div>
</body>
</html>
